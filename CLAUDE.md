# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

è¾“å‡ºä¸­æ–‡

# WriteFlow AI Writing Assistant

WriteFlow æ˜¯åŸºäº Claude Code æ ¸å¿ƒæ¶æ„çš„ AI å†™ä½œåŠ©æ‰‹ï¼Œä¸“ä¸ºæŠ€æœ¯å‹ä½œå®¶è®¾è®¡çš„ CLI å·¥å…·ã€‚

## React + Ink UI é‡æ„è®¡åˆ’ (v2.0.0)

### ğŸ¯ ç›®æ ‡ï¼šå®Œå…¨å¤åˆ» Claude Code çš„ç°ä»£ç»ˆç«¯ UI

å½“å‰ WriteFlow ä½¿ç”¨ç®€å•çš„ readline ç•Œé¢ï¼Œéœ€è¦å‡çº§ä¸º Claude Code é£æ ¼çš„ React + Ink å¯Œæ–‡æœ¬ç»ˆç«¯ç•Œé¢ã€‚

### æ ¸å¿ƒç‰¹æ€§è§„åˆ’

#### 1. æ¨¡å¼åˆ‡æ¢ç³»ç»Ÿ ğŸ”„
**å¿«æ·é”®ï¼šShift + Tab å¾ªç¯åˆ‡æ¢**

```
default â†’ acceptEdits â†’ plan â†’ bypassPermissions â†’ default
```

- **default** - æ­£å¸¸æ‰§è¡Œæ¨¡å¼
- **acceptEdits** - è‡ªåŠ¨æ¥å—ç¼–è¾‘æ¨¡å¼ 
- **plan** - è®¡åˆ’æ¨¡å¼ï¼ˆåªè¯»åˆ†æï¼Œå®‰å…¨è§„åˆ’ï¼‰
- **bypassPermissions** - ç»•è¿‡æƒé™æ¨¡å¼ï¼ˆé«˜çº§ç”¨æˆ·ï¼‰

#### 2. ç‰¹æ®Šè¾“å…¥æ¨¡å¼ âŒ¨ï¸
- **! å‰ç¼€** - ç›´æ¥æ‰§è¡Œ bash å‘½ä»¤
- **# å‰ç¼€** - è®°å½•ç¬”è®°/å¤‡å¿˜å½•
- **/ å‰ç¼€** - æ‰§è¡Œæ–œæ å‘½ä»¤

#### 3. ç°ä»£ UI ç»„ä»¶ ğŸ¨
- **å·¥å…·æ‰§è¡Œå¯è§†åŒ–** - æ˜¾ç¤ºå·¥å…·åç§°ã€å‚æ•°ã€è¿›åº¦
- **ç»“æ„åŒ–è¾“å‡º** - å¸¦ç¼©è¿›ã€é¢œè‰²ã€å›¾æ ‡
- **å®æ—¶çŠ¶æ€æ›´æ–°** - responding/thinking/executing
- **æ¨¡å¼æŒ‡ç¤ºå™¨** - å½“å‰æ¨¡å¼æ˜¾ç¤º

### æŠ€æœ¯æ¶æ„

#### UI ç»„ä»¶ç»“æ„
```
src/ui/
â”œâ”€â”€ App.tsx                      # ä¸» Ink åº”ç”¨
â”œâ”€â”€ modes/
â”‚   â”œâ”€â”€ ModeManager.ts          # æ¨¡å¼ç®¡ç†å™¨
â”‚   â”œâ”€â”€ PlanMode.tsx            # è®¡åˆ’æ¨¡å¼
â”‚   â””â”€â”€ AcceptEditsMode.tsx     # è‡ªåŠ¨æ¥å—æ¨¡å¼
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ Header.tsx              # æ ‡é¢˜æ 
â”‚   â”œâ”€â”€ ModeIndicator.tsx       # æ¨¡å¼æŒ‡ç¤ºå™¨
â”‚   â”œâ”€â”€ ToolDisplay.tsx         # å·¥å…·æ‰§è¡Œæ˜¾ç¤º  
â”‚   â”œâ”€â”€ MessageList.tsx         # æ¶ˆæ¯åˆ—è¡¨
â”‚   â”œâ”€â”€ InputArea.tsx           # è¾“å…¥åŒºåŸŸ
â”‚   â””â”€â”€ StatusBar.tsx           # çŠ¶æ€æ 
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useKeyboard.ts          # é”®ç›˜äº‹ä»¶ï¼ˆShift+Tabï¼‰
â”‚   â”œâ”€â”€ useMode.ts              # æ¨¡å¼çŠ¶æ€ç®¡ç†
â”‚   â””â”€â”€ useAgent.ts             # Agent é›†æˆ
â””â”€â”€ renderers/
    â”œâ”€â”€ ToolRenderer.ts         # å·¥å…·æ¸²æŸ“åè®®
    â”œâ”€â”€ ReadRenderer.tsx        # /read å·¥å…·æ¸²æŸ“
    â”œâ”€â”€ SearchRenderer.tsx      # /search å·¥å…·æ¸²æŸ“
    â””â”€â”€ WriteRenderer.tsx       # /write å·¥å…·æ¸²æŸ“
```

### å®æ–½é˜¶æ®µ

#### é˜¶æ®µ 1ï¼šåŸºç¡€æ¶æ„å‡†å¤‡ âœ…
1. âœ… å®‰è£… React + Ink ä¾èµ–
2. âœ… é…ç½® TypeScript JSX æ”¯æŒ
3. âœ… åˆ›å»ºåŸºæœ¬ç»„ä»¶ç»“æ„

#### é˜¶æ®µ 2ï¼šæ¨¡å¼ç®¡ç†ç³»ç»Ÿ âœ…

1. âœ… å®ç° ModeManager ç±»
2. âœ… åˆ›å»º 4 ç§äº¤äº’æ¨¡å¼
3. âœ… å®ç° Shift+Tab å¾ªç¯åˆ‡æ¢
4. âœ… æ·»åŠ æ¨¡å¼é™åˆ¶å’Œå®‰å…¨æœºåˆ¶

#### é˜¶æ®µ 3ï¼šé”®ç›˜äº¤äº’å¢å¼º âœ…

1. âœ… å…¨å±€é”®ç›˜äº‹ä»¶å¤„ç†
2. âœ… ç‰¹æ®Šè¾“å…¥å‰ç¼€æ£€æµ‹ (!, #, /)
3. âœ… å¿«æ·é”®åŠŸèƒ½å®ç°
4. âœ… å†å²å¯¼èˆªæ”¯æŒ

#### é˜¶æ®µ 4ï¼šUI ç»„ä»¶å®ç° âœ…

1. âœ… Header + ModeIndicator
2. âœ… ToolDisplay å·¥å…·å¯è§†åŒ–
3. âœ… MessageList æ¶ˆæ¯æ¸²æŸ“
4. âœ… InputArea è¾“å…¥å¤„ç†

#### é˜¶æ®µ 5ï¼šå·¥å…·æ¸²æŸ“å™¨ âœ…

1. âœ… æ ‡å‡†åŒ–å·¥å…·æ¸²æŸ“åè®®
2. âœ… ä¸ºæ¯ä¸ªå·¥å…·åˆ›å»ºä¸“å±æ¸²æŸ“å™¨
3. âœ… å·®å¼‚æ˜¾ç¤ºã€è¿›åº¦æ¡ã€ç»“æœæŠ˜å 
4. âœ… è¯­æ³•é«˜äº®å’Œæ ¼å¼åŒ–

#### é˜¶æ®µ 6ï¼šå®Œæ•´é›†æˆæµ‹è¯• âœ…

1. âœ… æ›¿æ¢ç°æœ‰ CLI æ¥å£ (å·²é›†æˆï¼Œæœ‰å›é€€æœºåˆ¶)
2. âœ… ä¿æŒå‘½ä»¤å…¼å®¹æ€§
3. âœ… æ€§èƒ½ä¼˜åŒ–å’Œæµ‹è¯• (ç±»å‹é”™è¯¯å·²ä¿®å¤)
4. âœ… ç”¨æˆ·ä½“éªŒéªŒè¯ (UIç³»ç»Ÿå®Œæ•´å®ç°)

### é¢„æœŸæ•ˆæœ âœ¨

å®Œæˆåçš„ WriteFlow å°†æ‹¥æœ‰ï¼š
- âœ… **Shift+Tab æ¨¡å¼åˆ‡æ¢** - å®Œå…¨å¤åˆ» Claude Code
- âœ… **Plan æ¨¡å¼** - å®‰å…¨çš„è®¡åˆ’åˆ¶å®šæ¨¡å¼  
- âœ… **ç‰¹æ®Šè¾“å…¥** - !bashã€#ç¬”è®°ã€/å‘½ä»¤
- âœ… **å¯Œæ–‡æœ¬ç»ˆç«¯** - ç°ä»£åŒ–è§†è§‰æ•ˆæœ
- âœ… **å·¥å…·å¯è§†åŒ–** - å®æ—¶æ‰§è¡ŒçŠ¶æ€æ˜¾ç¤º
- âœ… **ä¸“ä¸šä½“éªŒ** - ä¸ Claude Code ç›¸åŒçš„äº¤äº’æ„Ÿå—

## å½“å‰ç‰ˆæœ¬çŠ¶æ€ (v1.0.5)

### âœ… åŸºç¡€åŠŸèƒ½å·²å®Œæˆ
æ‰€æœ‰ /help ä¸­æ˜¾ç¤ºçš„å‘½ä»¤å·²å®ç°å¹¶èƒ½æ­£å¸¸è¯†åˆ«ï¼š
- æ ¸å¿ƒå†™ä½œå‘½ä»¤: /outline, /rewrite, /research, /style
- ç³»ç»Ÿç®¡ç†å‘½ä»¤: /model, /settings, /status, /clear  
- æ–‡ä»¶æ“ä½œå‘½ä»¤: /read, /edit, /search (é›†æˆ ReadArticle å·¥å…·)
- å‘å¸ƒå·¥å…·å‘½ä»¤: /publish, /format (é›†æˆ ReadArticle å·¥å…·)

### ğŸ‰ v2.0.0 UI é‡æ„å·²å®Œæˆ âœ…

**å®Œå…¨å®ç°äº†è®¡åˆ’ä¸­çš„æ‰€æœ‰ç»„ä»¶ï¼š**
- âœ… **å®Œæ•´ç›®å½•ç»“æ„** - modes/, components/, hooks/, renderers/
- âœ… **4ç§äº¤äº’æ¨¡å¼** - default, acceptEdits, plan, bypassPermissions  
- âœ… **Shift+Tabåˆ‡æ¢** - å®Œå…¨å¤åˆ»Claude Codeçš„æ¨¡å¼å¾ªç¯
- âœ… **ç‰¹æ®Šè¾“å…¥æ¨¡å¼** - !(bash), #(ç¬”è®°), /(å‘½ä»¤)
- âœ… **ä¸“ç”¨æ¸²æŸ“å™¨** - ReadRenderer, SearchRenderer, WriteRenderer
- âœ… **ç°ä»£åŒ–UI** - React+Inkå¯Œæ–‡æœ¬ç»ˆç«¯ç•Œé¢

## æŠ€æœ¯æ ˆè§„åˆ’

### æ–°å¢ UI ä¾èµ–
```json
{
  "dependencies": {
    "ink": "^4.4.1",
    "@inkjs/ui": "^2.0.0", 
    "ink-text-input": "^5.0.1",
    "ink-select-input": "^5.0.0",
    "ink-table": "^3.0.0",
    "ink-spinner": "^5.0.0"
  }
}
```

### TypeScript é…ç½®æ›´æ–°
```json
{
  "compilerOptions": {
    "jsx": "react-jsx",
    "jsxImportSource": "react"
  }
}
```

